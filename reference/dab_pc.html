<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Diameter above buttresses point cloud — dab_pc • ITSMe</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Diameter above buttresses point cloud — dab_pc"><meta name="description" content="Returns the diameter above buttresses (DAB) and the functional diameter above
buttresses (fDAB) of a tree measured from a tree point cloud."><meta property="og:description" content="Returns the diameter above buttresses (DAB) and the functional diameter above
buttresses (fDAB) of a tree measured from a tree point cloud."><meta property="og:image" content="https://lmterryn.github.io/ITSMe/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ITSMe</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ITSMe.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lmterryn/ITSMe/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Diameter above buttresses point cloud</h1>
      <small class="dont-index">Source: <a href="https://github.com/lmterryn/ITSMe/blob/v1.0.2/R/basic_metrics_pc.R" class="external-link"><code>R/basic_metrics_pc.R</code></a></small>
      <div class="d-none name"><code>dab_pc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns the diameter above buttresses (DAB) and the functional diameter above
buttresses (fDAB) of a tree measured from a tree point cloud.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dab_pc</span><span class="op">(</span></span>
<span>  <span class="va">pc</span>,</span>
<span>  thresholdbuttress <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>  maxbuttressheight <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  slice_thickness <span class="op">=</span> <span class="fl">0.06</span>,</span>
<span>  functional <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  concavity <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  dtm <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  r <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plotcolors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#000000"</span>, <span class="st">"#808080"</span>, <span class="st">"#1c027a"</span>, <span class="st">"#08aa7c"</span>, <span class="st">"#fac87f"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-pc">pc<a class="anchor" aria-label="anchor" href="#arg-pc"></a></dt>
<dd><p>The tree point cloud as a data.frame with columns X,Y,Z. Output of
<code><a href="read_tree_pc.html">read_tree_pc</a></code>.</p></dd>


<dt id="arg-thresholdbuttress">thresholdbuttress<a class="anchor" aria-label="anchor" href="#arg-thresholdbuttress"></a></dt>
<dd><p>Numeric value (default=0.001) that is multiplied
with the radius to determine if the stem is circular or irregular at the
height the slice is taken. For example with the default value 0.001: when
the average residual (obtained after an initial circle fitting at 1.3 m)
exceeds a value of 0.001 times the radius, indicating a non-circular
(irregular) stem shape and presumably buttresses, the circle fitting
process is repeated with a new slice 6 mm higher than the previous one
until a slice above the buttresses is reached.</p></dd>


<dt id="arg-maxbuttressheight">maxbuttressheight<a class="anchor" aria-label="anchor" href="#arg-maxbuttressheight"></a></dt>
<dd><p>Numeric value (default=7) that limits the height at
which the diameter is measured. When this height is reached (because
residuals do not become smaller than thresholdbuttress * R), the
thresholdbuttress value is increased with 0.0005 and the fitting starts
again at 1.3 m.</p></dd>


<dt id="arg-slice-thickness">slice_thickness<a class="anchor" aria-label="anchor" href="#arg-slice-thickness"></a></dt>
<dd><p>Numeric value (default = 0.06) that determines the
thickness of the slice which is used to measure the diameter.</p></dd>


<dt id="arg-functional">functional<a class="anchor" aria-label="anchor" href="#arg-functional"></a></dt>
<dd><p>Logical (default=FALSE), indicates if the functional
diameter should be calculated.</p></dd>


<dt id="arg-concavity">concavity<a class="anchor" aria-label="anchor" href="#arg-concavity"></a></dt>
<dd><p>Numeric value (default=4) concavity for the computation of
the functional diameter using a concave hull based on
<code><a href="https://joelgombin.github.io/concaveman/reference/concaveman.html" class="external-link">concaveman</a></code>.</p></dd>


<dt id="arg-dtm">dtm<a class="anchor" aria-label="anchor" href="#arg-dtm"></a></dt>
<dd><p>The digital terrain model as a data.frame with columns X,Y,Z
(default = NA). If the digital terrain model is in the same format as a
point cloud it can also be read with <code><a href="read_tree_pc.html">read_tree_pc</a></code>.</p></dd>


<dt id="arg-r">r<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>Numeric value (default=5) r which determines the range taken for the
dtm. Should be at least the resolution of the dtm. Only relevant when a dtm
is provided.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>Logical (default=FALSE), indicates if the optimised circle
fitting is plotted.</p></dd>


<dt id="arg-plotcolors">plotcolors<a class="anchor" aria-label="anchor" href="#arg-plotcolors"></a></dt>
<dd><p>list of five colors for plotting. Only relevant when plot
= TRUE. The stem points above buttresses, stem points at breast height,
fitted circle, the concave hull and the estimated center are colored by the
first, second, third, fourth and fifth element of this list respectively.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List with the diameter of the stem above buttresses, the residuals on
the fitting, and the functional diameter at breast height. Also optionally
(plot=TRUE) plots the circle fitting on the horizontal slice which is then
included in the list output.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The DAB is measured as the diameter of the optimal circle fitted through a
6mm thick horizontal slice taken above the buttresses using using
<code><a href="diameter_slice_pc.html">diameter_slice_pc</a></code>. A least squares circle fitting algorithm was
applied to find the optimal fit. The height at which the horizontal slice is
taken, is determined iteratively. Starting at 1.27 m to 1.33 m from the
lowest point of the tree point cloud. The average residual between the points
and the fitted circle is calculated. When the average residual exceeds a
value of "thresholdbuttress" times the radius, indicating a non-circular
(irregular) stem shape and presumably buttresses, the process is repeated
with a new slice 6 mm higher than the previous one until a slice above the
buttresses is reached. When the "maxbuttressheight" is exceeded the iterative
process is restarted with a "thresholdbuttress" increased with 0.0005. At the
determined height above buttresses also the functional diameter is calculated
using <code><a href="diameter_slice_pc.html">diameter_slice_pc</a></code>. When the bottom of the point cloud is
incomplete or obstructed you can choose to add a digital terrain model as an
input which is used to estimate lowest point of the point cloud in order to
obtain slices at the correct height of the tree.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Read tree point cloud and calculate the DAB</span></span></span>
<span class="r-in"><span><span class="va">pc_tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_tree_pc.html">read_tree_pc</a></span><span class="op">(</span>PC_path <span class="op">=</span> <span class="st">"path/to/point_cloud.txt"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dab</span> <span class="op">&lt;-</span> <span class="fu">dab_pc</span><span class="op">(</span>pc <span class="op">=</span> <span class="va">pc_tree</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># and plot the circle fitting</span></span></span>
<span class="r-in"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">dab_pc</span><span class="op">(</span>pc <span class="op">=</span> <span class="va">pc_tree</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dab</span> <span class="op">&lt;-</span> <span class="va">output</span><span class="op">$</span><span class="va">dab</span></span></span>
<span class="r-in"><span><span class="co"># with non-default settings</span></span></span>
<span class="r-in"><span><span class="va">dab</span> <span class="op">&lt;-</span> <span class="fu">dab_pc</span><span class="op">(</span>pc <span class="op">=</span> <span class="va">pc_tree</span>, thresholdbuttress <span class="op">=</span> <span class="fl">0.002</span>, maxbuttressheight <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Louise Terryn.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

