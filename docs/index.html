<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="With this package you can obtain structural metrics from individual 
 tree point clouds and their respective quantitative structure models (treeQSM).">
<title>Individual Tree Structural Metrics  • ITSMe</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Individual Tree Structural Metrics ">
<meta property="og:description" content="With this package you can obtain structural metrics from individual 
 tree point clouds and their respective quantitative structure models (treeQSM).">
<meta property="og:image" content="https://lmterryn.github.io/ITSMe/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">ITSMe</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/ITSMe.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lmterryn/ITSMe/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><p align="center">
<img src="reference/figures/logo.png" height="200"></p>
<!-- badges: start -->

<div class="section level2">
<h2 id="goal">Goal<a class="anchor" aria-label="anchor" href="#goal"></a>
</h2>
<p>The goal of the ITSMe (Individual Tree Structural Metrics) R-package is to provide easy to use functions to quickly obtain structural metrics from individual tree point clouds and their respective quantitative structure models (QSMs).</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of ITSMe from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"lmterryn/ITSMe"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="input">Input<a class="anchor" aria-label="anchor" href="#input"></a>
</h2>
<p>The functions are developed for tree point clouds obtained with TLS and QSMs obtained with <a href="https://github.com/InverseTampere/TreeQSM" class="external-link">TreeQSM</a>. The functions can, however, also be used on tree point clouds obtained from UAV-LS or MLS. You always need to keep in mind that the accuracy of the metric measurements will depend on the quality of the data.</p>
</div>
<div class="section level2">
<h2 id="individual-tree-structural-metrics">Individual tree structural metrics<a class="anchor" aria-label="anchor" href="#individual-tree-structural-metrics"></a>
</h2>
<p>Structural metrics that can be calculated with the ITSMe package are summarised in the tables below.</p>
<div class="section level3">
<h3 id="basic-structural-metrics">Basic structural metrics<a class="anchor" aria-label="anchor" href="#basic-structural-metrics"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>structural metric</th>
<th align="center">function name</th>
<th align="right">input</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>diameter at breast height (m)</td>
<td align="center">dbh_pc, dbh_qsm</td>
<td align="right">point cloud, QSM</td>
</tr>
<tr class="even">
<td>diameter above buttresses (m)</td>
<td align="center">dab_pc</td>
<td align="right">point cloud</td>
</tr>
<tr class="odd">
<td>tree height (m)</td>
<td align="center">tree_height_pc, tree_height_qsm</td>
<td align="right">point cloud, QSM</td>
</tr>
<tr class="even">
<td>projected area (m<sup>2</sup>)</td>
<td align="center">projected_area_pc</td>
<td align="right">point cloud</td>
</tr>
<tr class="odd">
<td>alpha volume (m<sup>3</sup>)</td>
<td align="center">alpha_volume_pc</td>
<td align="right">point cloud</td>
</tr>
<tr class="even">
<td>tree volume (m<sup>3</sup>)</td>
<td align="center">tree_volume_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="odd">
<td>trunk volume (m<sup>3</sup>)</td>
<td align="center">trunk_volume_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="even">
<td>total branch volume (m<sup>3</sup>)</td>
<td align="center">total_branch_volume_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="odd">
<td>total branch length (m)</td>
<td align="center">total_branch_length_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="even">
<td>total cylinder length (m)</td>
<td align="center">total_cyl_length_qsm</td>
<td align="right">QSM</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="structural-metrics-from-terryn-et-al-2020">Structural metrics from Terryn et al. (2020)<a class="anchor" aria-label="anchor" href="#structural-metrics-from-terryn-et-al-2020"></a>
</h3>
<p>These are the metrics defined in <a href="https://doi.org/10.1016/j.isprsjprs.2020.08.009" class="external-link">Terryn et al. (2020)</a> which were adapted from <a href="https://doi.org/10.1016/j.rse.2016.12.002" class="external-link">Akerblom et al. (2017)</a> except for the branch angle ratio and the relative volume ratio. Definitions of the metrics can be found in the help files of the functions and the papers of Terryn et al. (2020) and Akerblom et al. (2017). Normalisation according to Terryn et al. (2020) as well as Akerblom et al. (2017) is possible through the normalisation parameter included in the functions of the metrics that were adapted by Terryn et al. (2020). If the tree point cloud is provided along with the TreeQSM in the functions, dbh and tree height values are based on the point clouds rather than the QSMs. When the buttress parameter is indicated “TRUE” the diameter above buttresses instead of the diameter at breast height is used.</p>
<table class="table">
<colgroup>
<col width="46%">
<col width="33%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th>structural metric</th>
<th align="center">function name</th>
<th align="right">input</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>stem branch angle (degrees)</td>
<td align="center">stem_branch_angle_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="even">
<td>stem branch cluster size</td>
<td align="center">stem_branch_cluster_size_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="odd">
<td>stem branch radius (-/m)</td>
<td align="center">stem_branch_radius_qsm</td>
<td align="right">QSM (+point cloud)</td>
</tr>
<tr class="even">
<td>stem branch length (-/m)</td>
<td align="center">stem_branch_length_qsm</td>
<td align="right">QSM (+point cloud)</td>
</tr>
<tr class="odd">
<td>stem branch distance (-/m)</td>
<td align="center">stem_branch_distance_qsm</td>
<td align="right">QSM (+point cloud)</td>
</tr>
<tr class="even">
<td>dbh tree height ratio</td>
<td align="center">dbh_height_ratio_qsm</td>
<td align="right">QSM (+point cloud)</td>
</tr>
<tr class="odd">
<td>dbh tree volume ratio (m<sup>−2</sup>)</td>
<td align="center">dbh_volume_ratio_qsm</td>
<td align="right">QSM (+point cloud)</td>
</tr>
<tr class="even">
<td>volume below 55</td>
<td align="center">volume_below_55_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="odd">
<td>cylinder length volume ratio (m<sup>−2</sup>)</td>
<td align="center">cylinder_length_volume_ratio_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="even">
<td>shedding ratio</td>
<td align="center">shedding_ratio_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="odd">
<td>branch angle ratio</td>
<td align="center">branch_angle_ratio_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="even">
<td>relative volume ratio</td>
<td align="center">relative_volume_ratio_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="odd">
<td>crown start height</td>
<td align="center">crown_start_height_qsm</td>
<td align="right">QSM (+point cloud)</td>
</tr>
<tr class="even">
<td>crown height</td>
<td align="center">crown_height_qsm</td>
<td align="right">QSM (+point cloud)</td>
</tr>
<tr class="odd">
<td>crown evenness</td>
<td align="center">crown_evenness_qsm</td>
<td align="right">QSM</td>
</tr>
<tr class="even">
<td>crown diameter crown height ratio</td>
<td align="center">crown_diameterheight_ratio_qsm</td>
<td align="right">QSM (+point cloud)</td>
</tr>
<tr class="odd">
<td>dbh minimum tree radius ratio</td>
<td align="center">dbh_minradius_ratio_qsm</td>
<td align="right">QSM (+point cloud)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>For complete workflows, have a look at the ITSMe vignette with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"ITSMe"</span><span class="op">)</span></code></pre></div>
<p>Calculating the diameter at breast height versus the diameter above buttresses of a tree:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lmterryn/ITSMe" class="external-link">ITSMe</a></span><span class="op">)</span>
<span class="co"># Read the point cloud file from the Specified path to the tree point cloud file</span>
<span class="va">pc_tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_tree_pc.html">read_tree_pc</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"path/to/point/cloud.txt"</span><span class="op">)</span>
<span class="co"># Use dbh_pc function with default parameters and plot the fit</span>
<span class="va">dbh</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dbh_pc.html">dbh_pc</a></span><span class="op">(</span>pc <span class="op">=</span> <span class="va">pc_tree</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># Use dab_pc function with default parameters and plot the fit</span>
<span class="va">dab</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dab_pc.html">dab_pc</a></span><span class="op">(</span>pc <span class="op">=</span> <span class="va">pc_tree</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p align="center">
<img src="reference/figures/dbh_example.jpeg" height="500"></p>
<p align="center">
<img src="reference/figures/dab_example.jpeg" height="500"></p>
<p>Calculating the stem branch distance of a TreeQSM:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lmterryn/ITSMe" class="external-link">ITSMe</a></span><span class="op">)</span>
<span class="co"># Read the TreeQSM file from the Specified path to the TreeQSM file</span>
<span class="va">qsm</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_tree_qsm.html">read_tree_qsm</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"path/to/QSM.mat"</span><span class="op">)</span>
<span class="co"># Use stem_branch_distance_qsm function</span>
<span class="va">sbd</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stem_branch_distance_qsm.html">stem_branch_distance_qsm</a></span><span class="op">(</span>cylinder <span class="op">=</span> <span class="va">qsm</span><span class="op">$</span><span class="va">cylinder</span>, 
                                treedata <span class="op">=</span> <span class="va">qsm</span><span class="op">$</span><span class="va">treedata</span>, normalisation <span class="op">=</span> <span class="st">"dbh"</span><span class="op">)</span>
<span class="co"># Using the point cloud information for more accurate dbh normalisation</span>
<span class="va">pc_tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_tree_pc.html">read_tree_pc</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"path/to/point/cloud.txt"</span><span class="op">)</span>
<span class="va">sbd</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stem_branch_distance_qsm.html">stem_branch_distance_qsm</a></span><span class="op">(</span>cylinder <span class="op">=</span> <span class="va">qsm</span><span class="op">$</span><span class="va">cylinder</span>, 
                                treedata <span class="op">=</span> <span class="va">qsm</span><span class="op">$</span><span class="va">treedata</span>, normalisation <span class="op">=</span> <span class="st">"dbh"</span>, 
                                pc <span class="op">=</span> <span class="va">pc_tree</span>, buttress <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Calculating a summary data.frame with the basic structural metrics (tree position, dbh, dab, tree height, projected area, 3D alpha volume) that can be obtained from individual tree point clouds for all point clouds in a specific folder:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lmterryn/ITSMe" class="external-link">ITSMe</a></span><span class="op">)</span>
<span class="co">#Run summary function with default parameter settings</span>
<span class="va">basic_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/summary_basic_pointcloud_metrics.html">summary_basic_pointcloud_metrics</a></span><span class="op">(</span>PCs_path <span class="op">=</span> <span class="st">"path/to/point/cloud/folder/"</span>, 
                                                  extension <span class="op">=</span> <span class="st">".txt"</span><span class="op">)</span></code></pre></div>
<p>If you set the plot parameter TRUE and provide an OUT_path, this function saves a summary figure for each tree:</p>
<p align="center">
<img src="reference/figures/summary.jpeg" height="500"></p>
<p>Calculating a summary data.frame with the structural metrics defined by Terryn et al. (2020) for all TreeQSMs in a specific folder:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lmterryn/ITSMe" class="external-link">ITSMe</a></span><span class="op">)</span>
<span class="co">#Run summary function with default parameter settings</span>
<span class="va">qsm_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/summary_qsm_metrics.html">summary_qsm_metrics</a></span><span class="op">(</span>QSMs_path <span class="op">=</span> <span class="st">"path/to/QSM/folder/"</span>, 
                                      version <span class="op">=</span> <span class="st">"2.3.0"</span>,
                                      PCs_path <span class="op">=</span> <span class="st">"path/to/point/cloud/folder/"</span>, 
                                      extension <span class="op">=</span> <span class="st">".txt"</span><span class="op">)</span></code></pre></div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/lmterryn/ITSMe/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/lmterryn/ITSMe/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ITSMe</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Louise Terryn <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8405-2788" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/lmterryn/ITSMe/actions" class="external-link"><img src="https://github.com/lmterryn/ITSMe/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/447157090" class="external-link"><img src="https://zenodo.org/badge/447157090.svg" alt="DOI"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Louise Terryn.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
