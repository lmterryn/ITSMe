% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metrics_Terryn_2020.R
\name{dbh}
\alias{dbh}
\title{Diameter at breast height/above buttresses}
\usage{
dbh(
  treedata,
  pc = NA,
  buttress = FALSE,
  thresholdR2 = 0.001,
  slice_thickness = 0.06,
  thresholdbuttress = 0.001,
  maxbuttressheight = 7,
  concavity = 4,
  dtm = NA,
  r = 5
)
}
\arguments{
\item{treedata}{Treedata field of a TreeQSM that is returned by
\code{\link{read_tree_qsm}}.}

\item{pc}{The tree point cloud as a data.frame with columns X,Y,Z. Output of
\code{\link{read_tree_pc}}. Default is NA and indicates no tree point cloud
is available.}

\item{buttress}{Logical (default=FALSE), indicates if the trees have
buttresses. Only relevant if pc is available.}

\item{thresholdR2}{Numeric value (default=0.001). Parameter of the
\code{\link{dbh_pc}} function used to calculate the diameter at breast
height. Only relevant if the tree point cloud is available and buttress ==
FALSE.}

\item{slice_thickness}{Numeric value (default = 0.06). Parameter of the
\code{\link{dbh_pc}} and \code{\link{dab_pc}} functions used to calculate
the diameter at breast height and above buttresses. Only relevant if the
tree point cloud is available.}

\item{thresholdbuttress}{Numeric value (default=0.001). Parameter of the
\code{\link{dab_pc}} function used to calculate the diameter above
buttresses. Only relevant if the tree point cloud is available and buttress
== TRUE.}

\item{maxbuttressheight}{Numeric value (default=7). Parameter of the
\code{\link{dab_pc}} function used to calculate the diameter at breast
height. Only relevant if the tree point cloud is available and buttress ==
TRUE.}

\item{concavity}{Numeric value (default=4) concavity for the computation of
the functional diameter using a concave hull based on
\code{\link[concaveman]{concaveman}}. Only relevant if the tree point cloud
is available.}

\item{dtm}{The digital terrain model as a data.frame with columns X,Y,Z
(default = NA). If the digital terrain model is in the same format as a
point cloud it can also be read with \code{\link{read_tree_pc}}.}

\item{r}{Numeric value (default=5) r which determines the range taken for the
dtm. Should be at least the resolution of the dtm. Only relevant when a dtm
is provided.}
}
\value{
The dbh or dab in meters.
}
\description{
Returns the diameter at breast height or diameter above buttresses.
}
\details{
If the tree point cloud is available the calculations are based on the point
cloud (most accurate). In this case the diameter at breast height (dbh) or
diameter above buttresses (dab) is calculated with \code{\link{dbh_pc}} or
\code{\link{dab_pc}} respectively. If the tree point cloud is not available
the dbh is based on the treeQSM with \code{\link{dbh_qsm}}. When the bottom
of the point cloud is incomplete or obstructed you can choose to add a
digital terrain model as an input which is used to estimate lowest point of
the point cloud in order to obtain slices at the correct height of the tree.
}
\examples{
\dontrun{
qsm <- read_tree_qsm(QSM_path = "path/to/qsm.mat")
DBH <- dbh(treedata = qsm$treedata)
pc_tree <- read_tree_pc(PC_path = "path/to/point_cloud.txt")
DBH <- dbh(treedata = qsm$treedata, pc = pc_tree, buttress = TRUE)
}
}
